(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,a){e.exports=a(254)},254:function(e,t,a){"use strict";a.r(t);var n=a(3),o=a(4),i=a(9),r=a(16),c=a(8),s=a(15),l=a(122),d=a.n(l),h=a(229),p=a.n(h),u=a(230),f=a.n(u),g=(a(261),a(298)),b=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","g","r","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],m=function(e){function t(){var e,a;Object(o.a)(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={model:null,preview:"",predictions:[]},a.onDrop=function(e,t,n){a.setState({preview:e[0].preview||n[0]})},a.cropToCanvas=function(e,t,a){var n=e.naturalWidth,o=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height);var i=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),r=Math.round(n*i),c=Math.round(o*i);a.drawImage(e,0,0,n,o,(t.width-r)/2,(t.height-c)/2,r,c)},a.onImageChange=function(e){var t=document.getElementById("canvas"),o=t.getContext("2d");a.cropToCanvas(e.target,t,o);var i=a.state.model.inputs[0].shape.slice(1,3),r=Object(n.a)(i,2),c=r[0],s=r[1],l=g.tidy(function(){return g.image.resizeBilinear(g.browser.fromPixels(t),[c,s]).div(255).expandDims(0)});a.state.model.executeAsync(l).then(function(e){var a="9px sans-serif";o.font=a,o.textBaseline="top";var i,r=Object(n.a)(e,4),c=r[0],s=r[1],l=r[2],d=r[3],h=c.dataSync(),p=s.dataSync(),u=l.dataSync(),f=d.dataSync()[0];for(g.dispose(e),i=0;i<f;++i){var m=h.slice(4*i,4*(i+1)),v=Object(n.a)(m,4),w=v[0],k=v[1],y=v[2],j=v[3];w*=t.width,y*=t.width,k*=t.height;var S=y-w,x=(j*=t.height)-k,D=b[u[i]],O=p[i].toFixed(2);o.strokeStyle="#00000050",o.lineWidth=4,o.strokeRect(w,k,S,x),o.fillStyle="#f0f8ff50";var z=o.measureText(D+":"+O).width,E=parseInt(a,10);o.fillRect(w,k,z+4,E+4)}var C=0,I=0;for(i=0;i<f;++i){var M=h.slice(4*i,4*(i+1)),B=Object(n.a)(M,3),N=B[0],R=B[1];N*=t.width,R*=t.height;var T=b[u[i]],W=p[i].toFixed(2);o.fillStyle="#000000",o.fillText(T+":"+W,N,R),16===u[i]?C=1+C:C+=0,15===u[i]?I=1+I:I+=0}var A=Math.round(C/(C+I)*100),F=String(C),H=String(I),J=String(A);console.log("\u7dd1\u8272\u306e\u7c92\u306f"+F+"\u7c92\u3001\u6210\u719f\u3057\u305f\u7c92\u306f"+H+"\u7c92\u3001<br>\u63a8\u5b9a\u3055\u308c\u308b\u5e2f\u7dd1\u8272\u7c7e\u6b69\u5408\u306f"+J+"\uff05\u3067\u3059\u3002")})},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.loadGraphModel("web_model/model.json").then(function(t){e.setState({model:t})})}},{key:"render",value:function(){return d.a.createElement("div",{className:"Dropzone-page"},this.state.model?d.a.createElement(f.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop},this.state.preview?d.a.createElement("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",d.a.createElement("canvas",{id:"canvas",width:"640",height:"640"})):d.a.createElement("div",{className:"Dropzone"},"Loading model..."))}}]),t}(d.a.Component),v=document.getElementById("root");p.a.render(d.a.createElement(m,null),v)},261:function(e,t,a){},267:function(e,t){},268:function(e,t){},276:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},297:function(e,t){}},[[253,2,1]]]);
//# sourceMappingURL=main.33671276.chunk.js.map